<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous" />
  <link rel="stylesheet" href="invest.css">
  <title>Compound Interest Calculator</title>
</head>

<body>

  <h1>Visualise your investments!</h1>

  <div class="card" style="width: 20rem; height: 30rem;">
    <div class="card-body">
      <h5 class="card-title">Investment</h5>
      <h6 class="card-subtitle mb-2 text-body-secondary">Assets Management</h6>

      <form>
        <label for="amount">Enter Amount</label>
        <input type="text" id="amount" name="amount" placeholder="Initial Investment £">

        <label for="years">Years</label><br><br>
        <input type="text" id="years" name="years" placeholder="Years"><br><br>

        <label for="weeklyContributions">Weekly Contributions</label><br><br>
        <input type="text" id="weeklyContributions" placeholder="Weekly Contributions £"><br><br>

        <label for="interest">Interest</label><br><br>
        <input type="text" id="interest" placeholder="Interest Rate %"><br><br>
      </form>

      <button type="button" class="btn btn-primary" id="calculateBtn">Calculate</button>

      <div id="result"></div>

    </div>
  </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

  <canvas id="myBar" style="width:100%;max-width:700px"></canvas>
  <script>
    function createChart(barLabels, barValues) {
      return new Chart("myBar", {
        type: "bar",
        data: {
          labels: barLabels,
          datasets: [{
            backgroundColor: "rgb(0,0,255)",
            data: barValues
          }]
        },
        options: {
          legend: { display: false },
          scales: {
            yAxes: [{
              ticks: { beginAtZero: true }
            }]
          }
        }
      });
    }
  
    var barValues = [0];
    var barLabels = ["0"];
    var myChart = createChart(barLabels, barValues);
  
    document.getElementById("calculateBtn").addEventListener("click", function() {
      var amount = Number(document.getElementById("amount").value);
      var years = Number(document.getElementById("years").value);
      var weeklyContributions = Number(document.getElementById("weeklyContributions").value);
      var interestRate = Number(document.getElementById("interest").value);
  
      var annualContributions = weeklyContributions * 52;
      var totalInvestment = amount;
  
      barValues = [0];
      barLabels = ["0"];
  
      for (var i = 1; i <= years; i++) {
        var interest = (totalInvestment + annualContributions) * (interestRate / 100);
        totalInvestment += annualContributions + interest;
        barValues.push(totalInvestment.toFixed(2));
        barLabels.push(i.toString());
      }
  
      myChart.destroy(); // Destroy the old chart
      myChart = createChart(barLabels, barValues); // Create a new chart with the updated values
      document.getElementById("result").innerHTML = "<h3>Projected Investment Value after " + years + " years: £" + totalInvestment.toFixed(2) + "</h3>";
    });
  </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-pzjw8f+ua7Kw1TIq0v8FqFjcJ6pajs/rfdfs3SO+kD4Ck5BdPtF+to8xMp9Ob+er"
  crossorigin="anonymous"></script>
</body>
</html>
